{% extends "base.html" %} {% load static %} {% block search %}

<input
  class="form-control me-2"
  type="search"
  placeholder="Search"
  aria-label="Search"
  id="myInput"
/>

{% endblock %} {% block content %}
<div class="container-fluid">
  <!-- Row 1 -->
  <div class="row">
    <div class="col-lg-12 d-flex align-items-stretch">
      <div class="card w-100">
        <div class="card-body">
          <div class="container mr">
            <h1>Customer</h1>
            <table class="table table-striped mt-3">
              <thead>
                <tr>
                  <th onclick="sortTable(0)">
                    Customer <span id="arrow0">&#9650;</span>
                  </th>
                  <th onclick="sortTable(1)">
                    Stage <span id="arrow1"></span>
                  </th>
                  <th onclick="sortTable(2)">
                    Next action <span id="arrow2"></span>
                  </th>
                  <th onclick="sortTable(3)">
                    History <span id="arrow3"></span>
                  </th>
                  <th onclick="sortTable(4)">
                    Customer Field <span id="arrow4"></span>
                  </th>
                </tr>
              </thead>
              <tbody id="myTable">
                <!-- Iterate through customers and create rows -->
                {% comment %} {% for customer in customers %}
                <tr>
                  <td>{{ customer.name }}</td>
                  <td>{{ customer.stage }}</td>
                  <td>{{ customer.next_action }}</td>
                  <td>{{ customer.history }}</td>
                  <td>{{ customer.customer_field }}</td>
                </tr>
                {% endfor %} {% endcomment %}
                <a href="/customer1">
                  <tr>
                    <td>Customer 1</td>
                    <td>Stage 1</td>
                    <td>Next action 1</td>
                    <td>History 1</td>
                    <td>Customer Field 1</td>
                  </tr>
                </a>
                <tr>
                  <td>Customer 2</td>
                  <td>Stage 2</td>
                  <td>Next action 2</td>
                  <td>History 2</td>
                  <td>Customer Field 2</td>
                </tr>
                <tr>
                  <td>Customer 3</td>
                  <td>Stage 3</td>
                  <td>Next action 3</td>
                  <td>History 3</td>
                  <td>Customer Field 3</td>
                </tr>
                <tr>
                  <td>Customer 4</td>
                  <td>Stage 4</td>
                  <td>Next action 4</td>
                  <td>History 4</td>
                  <td>Customer Field 4</td>
                </tr>
                <tr>
                  <td>Customer 5</td>
                  <td>Stage 5</td>
                  <td>Next action 5</td>
                  <td>History 5</td>
                  <td>Customer Field 5</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock content %} {% block js %}
<script>
  function sortTable(colIndex) {
    var table,
      rows,
      switching,
      i,
      x,
      y,
      shouldSwitch,
      dir,
      switchcount = 0;
    table = document.getElementById("myTable");
    switching = true;
    dir = "asc"; // Set the sorting direction to ascending by default

    // Reset arrow indicators
    for (var i = 0; i < table.rows[0].cells.length; i++) {
      document.getElementById("arrow" + i).innerHTML = "";
    }

    // Set default arrow indicator
    document.getElementById("arrow" + colIndex).innerHTML = " &#9650;"; // Up arrow

    while (switching) {
      switching = false;
      rows = table.rows;
      for (i = 0; i < rows.length - 1; i++) {
        shouldSwitch = false;
        x = rows[i].getElementsByTagName("td")[colIndex];
        y = rows[i + 1].getElementsByTagName("td")[colIndex];
        if (dir == "asc") {
          if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        } else if (dir == "desc") {
          if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        }
      }
      if (shouldSwitch) {
        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
        switching = true;
        switchcount++;
      } else {
        if (switchcount == 0 && dir == "asc") {
          dir = "desc";
          switching = true;
        }
      }
    }

    // Set arrow indicator for each row
    for (i = 0; i < rows.length; i++) {
      var arrow = rows[i].getElementsByTagName("span")[0];
      if (i === 0) {
        arrow.innerHTML = " &#9650;"; // Up arrow for the header row
      } else {
        arrow.innerHTML = dir === "asc" ? " &#9650;" : " &#9660;"; // Up or down arrow
      }
    }
  }
</script>
{% endblock js %}
